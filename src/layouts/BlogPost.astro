---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Container from "../components/Container.astro";

type Props = CollectionEntry<"blog">["data"];

const {
  title,
  description,
  pubDate: date,
  updatedDate,
  heroImage,
  tags,
} = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={title} description={description} image={heroImage} />
    <style>
      .hero-image {
        width: 100%;
        position: relative;
        margin-bottom: 2rem;
      }
      .hero-image img {
        display: block;
        border-radius: 0;
        border: 2px solid black;
        box-shadow: 4px 4px 0px 0px rgba(0, 0, 0, 0.9);
        transform: rotate(-0.5deg);
        width: 100%;
        max-height: 400px;
        object-fit: cover;
      }
      .title {
        margin-bottom: 1.5rem;
      }
      .title h1 {
        font-weight: bold;
        font-size: 2rem;
        line-height: 1.2;
        margin-bottom: 1rem;
      }
      .date {
        display: inline-block;
        background-color: #ffde59;
        border: 2px solid black;
        padding: 0.25rem 0.75rem;
        font-weight: bold;
        margin-bottom: 2rem;
      }
      .content-wrapper {
        background-color: white;
        border: 2px solid black;
        box-shadow: 4px 4px 0px 0px rgba(0, 0, 0, 0.9);
        padding: 2rem;
        margin-bottom: 2rem;
      }

      :global(.dark) .hero-image img {
        border-color: rgba(255, 255, 255, 0.7);
        box-shadow: 4px 4px 0px 0px rgba(255, 255, 255, 0.4);
      }

      :global(.dark) .content-wrapper {
        background-color: #212121;
        border-color: rgba(255, 255, 255, 0.7);
        box-shadow: 4px 4px 0px 0px rgba(255, 255, 255, 0.4);
      }

      :global(.dark) .date {
        background-color: #82b1f0;
        border-color: rgba(255, 255, 255, 0.7);
      }
    </style>
  </head>

  <body>
    <main>
      <Container>
        <article class="animate my-8">
          {
            heroImage && (
              <div class="hero-image">
                <img src={heroImage} alt={title} />
              </div>
            )
          }
          <div class="content-wrapper">
            <div class="title">
              <h1>{title}</h1>
              <div class="date">
                <time datetime={date.toISOString()}>
                  {
                    date.toLocaleDateString("en-us", {
                      year: "numeric",
                      month: "short",
                      day: "numeric",
                    })
                  }
                </time>
                {
                  updatedDate && (
                    <span class="last-updated-on">
                      Â· Updated on{" "}
                      {updatedDate.toLocaleDateString("en-us", {
                        year: "numeric",
                        month: "short",
                        day: "numeric",
                      })}
                    </span>
                  )
                }
              </div>
            </div>
            <slot />
          </div>
        </article>
      </Container>
    </main>
  </body>
</html>
